(this.webpackJsonphorizon_task=this.webpackJsonphorizon_task||[]).push([[0],{22:function(t,e,i){"use strict";i.r(e);var n=i(14),s=i.n(n),r=i(15),o=i(10),a=i(11),c=i(7),l=i.n(c),u=i(8),h=i(3),d=i(4),p=i(1),x=i(6),m=i(5),b=i(2),j=i.n(b),v=i(0),g=function(t){Object(x.a)(i,t);var e=Object(m.a)(i);function i(t){return Object(h.a)(this,i),e.call(this,t)}return Object(d.a)(i,[{key:"render",value:function(){return Object(v.jsx)("div",{style:{borderWidth:"25px",border:"solid black",margin:"5px",backgroundColor:this.props.backgroundColor?this.props.backgroundColor:"white",width:"40px",height:"40px",alignItems:"center",justifyContent:"center",display:"flex"},children:this.props.heldValue})}}]),i}(j.a.Component),y=function(t){Object(x.a)(i,t);var e=Object(m.a)(i);function i(t){var n;return Object(h.a)(this,i),(n=e.call(this,t)).delayedNumber=n.delayedNumber.bind(Object(p.a)(n)),n.state={index:n.props.index-1},t.delayNumberReveal&&n.delayedNumber(n.props.timeDelay),n}return Object(d.a)(i,[{key:"delayedNumber",value:function(t){var e=this;setTimeout((function(){e.setState({index:e.state.index+1})}),t)}},{key:"render",value:function(){for(var t=this.state.index+1,e=[],i=0;i<this.props.gameLength;i++){var n={};i<t&&(n.heldValue=this.props.values[i]),i===t&&this.props.valid&&(n.backgroundColor="lightgreen"),e.push(Object(v.jsx)(g,{backgroundColor:n.backgroundColor,heldValue:n.heldValue},i))}return Object(v.jsx)("div",{style:{border:"solid ".concat(this.props.machineColor?this.props.machineColor:"black"," 5px")},children:e})}}]),i}(j.a.Component),O=function(t){Object(x.a)(i,t);var e=Object(m.a)(i);function i(t){return Object(h.a)(this,i),e.call(this,t)}return Object(d.a)(i,[{key:"render",value:function(){return Object(v.jsx)("div",{style:{position:"absolute",top:"90vh",width:"175px"},children:Object(v.jsxs)("div",{style:{position:"absolute",left:"30px",margin:"5px",padding:"5px",border:"solid ".concat(this.props.borderColor," 2px")},children:[" Key: ",this.props.machineKey]})})}}]),i}(j.a.Component),f=(i(9),function(t){Object(x.a)(i,t);var e=Object(m.a)(i);function i(t){var n;return Object(h.a)(this,i),(n=e.call(this,t)).delayAnimation=n.delayAnimation.bind(Object(p.a)(n)),t.delayAnimation&&n.delayAnimation(n.props.timeDelay),n.state={animate:n.props.animate},n}return Object(d.a)(i,[{key:"delayAnimation",value:function(t){var e=this;setTimeout((function(){e.setState({animate:!0})}),t)}},{key:"render",value:function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"lever_ball",style:{width:"25px",height:"25px",borderRadius:"50%",backgroundColor:this.props.backgroundColor,animation:this.state.animate?"ball_clink":"",animationDuration:this.state.animate?".5s":""}}),Object(v.jsx)("div",{className:"lever_arm",style:{width:"5px",height:"90px",backgroundColor:this.props.backgroundColor,animation:this.state.animate?"arm_clink":"",animationDuration:this.state.animate?".5s":""}}),Object(v.jsx)("div",{style:{position:"relative",width:25,height:5,backgroundColor:this.props.backgroundColor,top:"25%",left:"0px"}})]})}}]),i}(j.a.Component)),I=function(t){Object(x.a)(i,t);var e=Object(m.a)(i);function i(t){return Object(h.a)(this,i),e.call(this,t)}return Object(d.a)(i,[{key:"render",value:function(){return Object(v.jsxs)("div",{style:{width:this.props.width,height:this.props.height,border:"solid ".concat(this.props.borderColor," 2px")},children:[this.props.description+":",Object(v.jsx)("div",{style:{color:"green"},children:this.props.points+"$"})]})}}]),i}(j.a.Component),w=function(t){Object(x.a)(i,t);var e=Object(m.a)(i);function i(t){return Object(h.a)(this,i),e.call(this,t)}return Object(d.a)(i,[{key:"render",value:function(){return Object(v.jsxs)("div",{style:{width:this.props.width,height:this.props.height,border:"solid ".concat(this.props.borderColor," 2px")},children:[this.props.description+":",Object(v.jsxs)("div",{style:{display:"flex",flex:"row",justifyContent:"center"},children:[Object(v.jsx)("div",{style:{color:"green"},children:this.props.points+"$"}),Object(v.jsx)("div",{children:"/"}),Object(v.jsx)("div",{children:this.props.totalPoints+"$"})]})]})}}]),i}(j.a.Component);function k(t,e){var i=function(){for(var t=0,e=0;0===t;)t=Math.random();for(;0===e;)e=Math.random();return Math.sqrt(-2*Math.log(t))*Math.cos(2*Math.PI*e)}()*t[e].sd+t[e].mu;return Math.floor(i)}var C=function(t){Object(x.a)(i,t);var e=Object(m.a)(i);function i(t){var n;Object(h.a)(this,i),(n=e.call(this,t)).subtrial=-1,n.key_map=function(t){for(var e={},i=0;i<t.length;i++)e[String(t[i].keyBind)]=i;return e}(n.props.machineVars),n.column_map=function(t){for(var e={},i=0;i<t.length;i++)e[String(i)]={mu:t[i].mu,sd:t[i].sd,valid:!1,discovered:[],machineColor:t[i].color,description:t[i].description};return e}(n.props.machineVars),n.key_press=n.key_press.bind(Object(p.a)(n)),n.advance_subtrial=n.advance_subtrial.bind(Object(p.a)(n)),n.process_choice=n.process_choice.bind(Object(p.a)(n)),n.nextTrial=n.nextTrial.bind(Object(p.a)(n)),n.time=new Date,n.data={meta_data:n.props,trial_data:[]},n.state={},n.advance_subtrial();for(var s=0;s<n.props.machineVars.length;s++)n.state[String(s)]={valid:n.column_map[String(s)].valid,discovered:[],description:n.column_map[String(s).description]};return n.state.total_points=n.props.total_points,n.state.round_points=0,n}return Object(d.a)(i,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.key_press)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.key_press)}},{key:"key_press",value:function(t){if(this.subtrial<this.props.gameLength){var e=new Date;String(t.key)in this.key_map&&this.column_map[String(this.key_map[t.key])].valid&&this.process_choice(String(this.key_map[String(t.key)]),e)}}},{key:"process_choice",value:function(t,e){this.advance_subtrial();for(var i={},n=null,s=0;s<this.props.machineVars.length;s++)String(s)===t?(n=k(this.column_map,t),this.column_map[String(s)].discovered.push(n)):this.column_map[String(s)].discovered.push("xxx"),i[String(s)]={valid:this.column_map[String(s)].valid,discovered:this.column_map[String(s)].discovered};i.last_choice=t,this.subtrial>this.props.force.length&&(i.total_points=this.state.total_points+n,i.round_points=this.state.round_points+n),this.data.trial_data.push({choice:t,value:n,reaction_time:e.getTime()-this.trial_start_time.getTime()}),this.setState(i),this.subtrial>=this.props.gameLength&&setTimeout(this.nextTrial,1e3)}},{key:"nextTrial",value:function(){this.props.nextTrial(this.data,this.state.round_points)}},{key:"advance_subtrial",value:function(){if(this.subtrial+=1,this.subtrial<this.props.force.length)for(var t=0;t<this.props.machineVars.length;t++)this.props.force[this.subtrial].includes(t)?this.column_map[String(t)].valid=!0:this.column_map[String(t)].valid=!1;else for(var e=0;e<this.props.machineVars.length;e++)this.column_map[String(e)].valid=!0}},{key:"render",value:function(){for(var t=[],e=null,i=!1,n=0;n<this.props.machineVars.length;n++)e=this.state[String(n)].discovered.length,i=String(n)==this.state.last_choice,t.push(Object(v.jsxs)("div",{className:"column",children:[Object(v.jsx)("h2",{style:{position:"relative",left:"10px"},children:this.column_map[String(n)].description}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)(f,{animate:i,backgroundColor:this.column_map[String(n)].machineColor},"Lever "+String(this.props.trial)+";"+String(this.subtrial)),Object(v.jsx)(y,{index:e,valid:this.state[String(n)].valid,values:this.state[String(n)].discovered,gameLength:this.props.gameLength,machineColor:this.column_map[String(n)].machineColor},"Game Machine "+String(this.props.trial)+";"+String(this.subtrial))]}),Object(v.jsx)(O,{borderColor:this.column_map[String(n)].machineColor,machineKey:this.props.machineVars[n].keyBind},"Key Display "+String(this.props.trial)+";"+String(this.subtrial))]},n));return this.trial_start_time=new Date,Object(v.jsxs)("div",{children:[Object(v.jsxs)("h1",{style:{width:"100%",textAlign:"center",display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[Object(v.jsx)(I,{points:this.state.round_points,width:"300px",height:"75px",borderColor:"black",description:"Money This Round"}),this.props.trialDescription,Object(v.jsx)(w,{points:this.state.total_points,width:"300px",height:"75px",borderColor:"black",description:"Total Money Earned",totalPoints:this.props.terminationPoints})]}),Object(v.jsx)("div",{className:"row",style:{justifyContent:"space-evenly",alignItems:"center"},children:t})]})}}]),i}(j.a.Component),_=function(t){Object(x.a)(i,t);var e=Object(m.a)(i);function i(t){var n;return Object(h.a)(this,i),(n=e.call(this,t)).nextInstruction=n.nextInstruction.bind(Object(p.a)(n)),n.key_press=n.key_press.bind(Object(p.a)(n)),n}return Object(d.a)(i,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.key_press)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.key_press)}},{key:"key_press",value:function(t){t.key===this.props.nextInstructionKey&&this.nextInstruction(),t.key===this.props.previousInstructionKey&&this.previousInstruction()}},{key:"nextInstruction",value:function(){this.props.nextInstruction()}},{key:"previousInstruction",value:function(){console.log(this.props.previousJump),this.props.previousInstruction(this.props.previousJump?this.props.previousJump:1)}},{key:"render",value:function(){for(var t=[],e=[],i=0;i<this.props.divs.length;i++)t.push(this.props.divs[i]);return this.props.previousInstructionKey&&e.push(Object(v.jsx)("div",{style:{width:"200px",height:"50px",border:"solid black 5px",textAlign:"center",fontSize:"20px",margin:"5px"},children:"Press ".concat(this.props.previousInstructionKey," to go back")},"previous "+String(i))),this.props.nextInstructionKey&&e.push(Object(v.jsx)("div",{style:{width:"200px",height:"50px",border:"solid black 5px",textAlign:"center",fontSize:"20px",margin:"5px"},children:"Press ".concat(this.props.nextInstructionKey," to continue")},"next "+String(i))),Object(v.jsxs)("div",{children:[t,Object(v.jsx)("div",{style:{display:"flex",flex:"row",position:"fixed",justifyContent:"space-evenly",bottom:"5%",width:"100%"},children:e})]})}}]),i}(j.a.Component),N=function(t){Object(x.a)(i,t);var e=Object(m.a)(i);function i(t){var n;return Object(h.a)(this,i),(n=e.call(this,t)).requestFullScreen=n.requestFullScreen.bind(Object(p.a)(n)),n}return Object(d.a)(i,[{key:"requestFullScreen",value:function(){var t=this.props.docVar,e=t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullScreen;e&&e.call(t),this.props.nextInstruction()}},{key:"render",value:function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{style:{border:"solid black 5px",marginLeft:"100px",marginRight:"100px",textAlign:"center"},children:"This experiment is best viewed in full screen, click the button below to go fullscreen and enter the experiment!"}),Object(v.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(v.jsx)("button",{className:"fullscreenbutton",style:{top:"150px"},onClick:this.requestFullScreen,children:"Go Fullscreen"})})]})}}]),i}(j.a.Component),S=function(t){Object(x.a)(i,t);var e=Object(m.a)(i);function i(t){return Object(h.a)(this,i),e.call(this,t)}return Object(d.a)(i,[{key:"render",value:function(){return console.log(this.props.data),Object(v.jsx)("h1",{style:{border:"solid black 5px",marginLeft:"100px",marginRight:"100px",textAlign:"center"},children:"The experiment in now over! You may now close this tab."})}}]),i}(j.a.Component);function L(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(Math.random()*(e+1)),n=[t[i],t[e]];t[e]=n[0],t[i]=n[1]}}function K(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"even",e=["main","main","other","other"],i=["main","main","main","other"],n=["main","other","other","other"];return"even"===t?(L(e),e):"weight_positive"===t?(L(e),i):"weight_negative"===t?(L(e),n):void 0}function T(){for(var t=["even","weight_negative","weight_positive"],e=function(t){for(var e,i=[{}],n=0;n<Object.keys(t).length;n++){for(var s=[],r=0;r<i.length;r++)for(var o=0;o<t[Object.keys(t)[n]].length;o++){var a=(e=i[r],JSON.parse(JSON.stringify(e)));a[Object.keys(t)[n]]=t[Object.keys(t)[n]][o],s.push(a)}i=s}return i}({mu:[40,60],deltaMu:[-30,-20,-12,-8,-4,4,8,12,20,30],sd:[8],mainBandit:[0,1],gameLength:[5,10]}),i=0;i<e.length;i++)e[i].forcedBandit=K(t[Math.floor(3*Math.random())]);return e}var A=function(){var t=function(t){for(var e=[],i=0;i<t.length;i++){var n={machineVars:[],gameLength:null,force:[]},s={},r={};0===t[i].mainBandit?(s.mu=t[i].mu,r.mu=t[i].mu+t[i].deltaMu,n.force=t[i].forcedBandit.map((function(t){return"main"==t?[0]:[1]}))):(s.mu=t[i].mu+t[i].deltaMu,r.mu=t[i].mu,n.force=t[i].forcedBandit.map((function(t){return"main"==t?[1]:[0]}))),s.sd=t[i].sd,r.sd=t[i].sd,s.keyBind="ArrowLeft",r.keyBind="ArrowRight",s.color="red",r.color="blue",s.description="Left Bandit",r.description="Right Bandit",n.gameLength=t[i].gameLength,n.machineVars.push(s),n.machineVars.push(r),n.addedMetaData=t[i],n.trialDescription="Horizon Trial ".concat(i+1," of ").concat(t.length),e.push(n)}return e}(T());L(t);for(var e=t.length,i=0;i<e;i++)t[i].trialDescription="Horizon Trial ".concat(i+1," of ").concat(e);return t};function D(t,e,i){return B.apply(this,arguments)}function B(){return(B=Object(u.a)(l.a.mark((function t(e,i,n){var s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://exius.nrdlab.org/WriteKey/createWriteKey",{headers:{"Content-Type":"application/json",authorization:"templateKey:".concat(e,";password:").concat(i)},method:"POST",body:JSON.stringify({metaData:n})});case 3:return s=t.sent,t.next=6,s.json();case 6:return t.abrupt("return",t.sent);case 9:throw t.prev=9,t.t0=t.catch(0),t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}function R(t,e,i){return M.apply(this,arguments)}function M(){return(M=Object(u.a)(l.a.mark((function t(e,i,n){var s,r,a,c,u,h;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,s=new FormData,r=Object(o.a)(e);try{for(r.s();!(a=r.n()).done;)c=a.value,console.log(c),u=new Blob([c.data],{type:"text/csv;charset=utf-8;"}),s.append(c.endpoint,u,c.fname)}catch(l){r.e(l)}finally{r.f()}return t.next=6,fetch("https://exius.nrdlab.org/Upload",{headers:{authorization:"templateKey:".concat(i,";writeKey:").concat(n)},method:"POST",body:s});case 6:return h=t.sent,t.next=9,h.json();case 9:return t.abrupt("return",t.sent);case 12:throw t.prev=12,t.t0=t.catch(0),t.t0;case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))).apply(this,arguments)}var H=function(t){Object(x.a)(i,t);var e=Object(m.a)(i);function i(t){var n;return Object(h.a)(this,i),(n=e.call(this,t)).password="",n.state={preflightError:!1,preflightFileFail:{},preflightInitiated:!1},n.submitPreflight=n.submitPreflight.bind(Object(p.a)(n)),n.updateInputValue=n.updateInputValue.bind(Object(p.a)(n)),console.log(n.props),n}return Object(d.a)(i,[{key:"updateInputValue",value:function(t){this.password=t.target.value}},{key:"submitPreflight",value:function(){var t=Object(u.a)(l.a.mark((function t(){var e,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.setState({preflightInitiated:!0}),t.next=4,D("Horizon_Task",this.password,"test_data");case 4:return e=t.sent,t.next=7,R([{endpoint:"HorizonJSON",fname:"Subject.json",data:""},{endpoint:"HorizonCSV",fname:"Subject.csv",data:""}],"Horizon_Task",e.writeKey);case 7:i=t.sent,console.log(e.writeKey),console.log(i),0==Object.keys(i.failedFiles).length?(this.props.getWriteKey(e.writeKey),this.props.nextInstruction()):this.setState({preflightFileFail:i}),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),console.log("error"),this.setState({preflightError:!0});case 17:case"end":return t.stop()}}),t,this,[[0,13]])})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.preflightError||0!==Object.keys(this.state.preflightFileFail).length?this.state.preflightError?Object(v.jsx)("div",{children:"Credentials Preflight Failed"}):Object(v.jsxs)("div",{children:["Failed Files: ",this.dataPreflight]}):Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{style:{top:"200px",position:"relative",textAlign:"center"},children:"Input Experiment Password Below"}),Object(v.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(v.jsx)("input",{style:{top:"200px",position:"relative",width:"400px",height:"50px",fontSize:"50px"},type:"text",onChange:this.updateInputValue})}),Object(v.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(v.jsx)("button",{className:"fullscreenbutton",style:{width:"200px",height:"400",top:"300px"},onClick:this.submitPreflight,children:"Submit"})}),Object(v.jsx)("h1",{style:{width:"100%",top:"400px",textAlign:"center",position:"relative"},children:this.state.preflightInitiated?"Verifying Credentials...":""})]})}}]),i}(j.a.Component);function V(t,e){var i=function(){for(var t=0,e=0;0===t;)t=Math.random();for(;0===e;)e=Math.random();return Math.sqrt(-2*Math.log(t))*Math.cos(2*Math.PI*e)}()*t[e].sd+t[e].mu;return Math.floor(i)}var P=function(t){Object(x.a)(i,t);var e=Object(m.a)(i);function i(t){var n;Object(h.a)(this,i),(n=e.call(this,t)).subtrial=-1,n.key_map=function(t){for(var e={},i=0;i<t.length;i++)e[String(t[i].keyBind)]=i;return e}(n.props.machineVars),n.column_map=function(t){for(var e={},i=0;i<t.length;i++)e[String(i)]={mu:t[i].mu,sd:t[i].sd,valid:!1,discovered:[],machineColor:t[i].color,description:t[i].description};return e}(n.props.machineVars),n.key_press=n.key_press.bind(Object(p.a)(n)),n.advance_subtrial=n.advance_subtrial.bind(Object(p.a)(n)),n.process_choice=n.process_choice.bind(Object(p.a)(n)),n.nextInstruction=n.nextInstruction.bind(Object(p.a)(n)),n.time=new Date,n.data={meta_data:n.props,trial_data:[]},n.state={},n.advance_subtrial();for(var s=0;s<n.props.machineVars.length;s++)n.state[String(s)]={valid:n.column_map[String(s)].valid,discovered:[],description:n.column_map[String(s).description]};return n.state.total_points=t.total_points,n.state.round_points=0,n}return Object(d.a)(i,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.key_press)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.key_press)}},{key:"key_press",value:function(t){if(this.subtrial<this.props.gameLength){var e=new Date;String(t.key)in this.key_map&&this.column_map[String(this.key_map[t.key])].valid&&this.process_choice(String(this.key_map[String(t.key)]),e)}}},{key:"process_choice",value:function(t,e){this.advance_subtrial();for(var i={},n=null,s=0;s<this.props.machineVars.length;s++)String(s)===t?(n=V(this.column_map,t),this.column_map[String(s)].discovered.push(n)):this.column_map[String(s)].discovered.push("xxx"),i[String(s)]={valid:this.column_map[String(s)].valid,discovered:this.column_map[String(s)].discovered};i.last_choice=t,this.subtrial>this.props.force.length&&(i.total_points=this.state.total_points+n,i.round_points=this.state.round_points+n),this.data.trial_data.push({choice:t,value:n,reaction_time:e.getTime()-this.trial_start_time.getTime()}),this.setState(i),this.subtrial>=this.props.gameLength&&setTimeout(this.nextInstruction,1e3)}},{key:"nextInstruction",value:function(){console.log(this.props),this.props.nextInstruction()}},{key:"advance_subtrial",value:function(){if(this.subtrial+=1,this.subtrial<this.props.force.length)for(var t=0;t<this.props.machineVars.length;t++)this.props.force[this.subtrial].includes(t)?this.column_map[String(t)].valid=!0:this.column_map[String(t)].valid=!1;else for(var e=0;e<this.props.machineVars.length;e++)this.column_map[String(e)].valid=!0}},{key:"render",value:function(){for(var t=[],e=null,i=!1,n=0;n<this.props.machineVars.length;n++)e=this.state[String(n)].discovered.length,i=String(n)==this.state.last_choice,t.push(Object(v.jsxs)("div",{className:"column",children:[Object(v.jsx)("h2",{style:{position:"relative",left:"10px"},children:this.column_map[String(n)].description}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)(f,{animate:i,backgroundColor:this.column_map[String(n)].machineColor},"Lever "+String(this.props.trial)+";"+String(this.subtrial)),Object(v.jsx)(y,{index:e,valid:this.state[String(n)].valid,values:this.state[String(n)].discovered,gameLength:this.props.gameLength,machineColor:this.column_map[String(n)].machineColor},"Game Machine "+String(this.props.trial)+";"+String(this.subtrial))]}),Object(v.jsx)(O,{borderColor:this.column_map[String(n)].machineColor,machineKey:this.props.machineVars[n].keyBind},"Key Display "+String(this.props.trial)+";"+String(this.subtrial))]},n));return this.trial_start_time=new Date,Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{style:{width:"100%",textAlign:"center",display:"flex",flexDirection:"row",justifyContent:"space-between"},children:Object(v.jsx)("div",{style:{textAlign:"center",width:"100%"},children:this.props.trialDescription})}),Object(v.jsx)("div",{className:"row",style:{justifyContent:"space-evenly",alignItems:"center"},children:t})]})}}]),i}(j.a.Component);function F(t){var e,i=JSON.parse(JSON.stringify(t)),n=i.trialData,s="",r="",a=Object(o.a)(n);try{for(a.s();!(e=a.n()).done;){var c=e.value;s+="banditForce"===c?'"'.concat(c,'"'):'"'.concat(z(c),'",')}}catch(p){a.e(p)}finally{a.f()}5==n.length&&(s+=",,,,,");var l=s.substring(0,s.length-1)+"\n";delete i.trialData;for(var u=0,h=Object.values(i);u<h.length;u++){var d=h[u];r+='"'.concat(d,'",')}return r+l}function z(t){for(var e="{",i=0,n=Object.entries(t);i<n.length;i++){var s=Object(r.a)(n[i],2),o=s[0],a=s[1];e+="".concat(o,":").concat(a,",")}var c=e.substring(0,e.length-1);return c+="}"}function E(t,e,i){return J.apply(this,arguments)}function J(){return(J=Object(u.a)(l.a.mark((function t(e,i,n){var s,r,a,c,u,h;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,s=new FormData,r=Object(o.a)(e);try{for(r.s();!(a=r.n()).done;)c=a.value,u=new Blob([c.data],{type:"text/csv;charset=utf-8;"}),s.append(c.endpoint,u,c.fname)}catch(l){r.e(l)}finally{r.f()}return t.next=6,fetch("https://exius.nrdlab.org/Upload",{headers:{authorization:"templateKey:".concat(i,";writeKey:").concat(n)},method:"POST",body:s});case 6:return h=t.sent,t.next=9,h.json();case 9:return t.abrupt("return",t.sent);case 12:throw t.prev=12,t.t0=t.catch(0),t.t0;case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))).apply(this,arguments)}var W=function(t){Object(x.a)(i,t);var e=Object(m.a)(i);function i(t){var n;Object(h.a)(this,i),(n=e.call(this,t)).nextTrial=n.nextTrial.bind(Object(p.a)(n)),n.nextInstruction=n.nextInstruction.bind(Object(p.a)(n)),n.previousInstruction=n.previousInstruction.bind(Object(p.a)(n)),n.getWriteKey=n.getWriteKey.bind(Object(p.a)(n)),n.sendDataToExius=n.sendDataToExius.bind(Object(p.a)(n)),n.nextInstructionTrial=n.nextInstructionTrial.bind(Object(p.a)(n)),n.gameData=[],n.csvData="trial,gamelength,banditForce,mainBandit,mainBanditMu,mainBanditSd,deltaMu,trial1,trial2,trial3,trial4,trial5,trial6,trial7,trial8,trial9,trial10\n",n.totalPoints=0,n.terminationPoints=14e3,n.state={currentTrial:0,instructionNumber:0,isFullScreen:!1,instructionPoints:0,instructionSubtrial:0},n.writeKey=null,n.instructionVars=[{gameLength:10,machineVars:[{mu:20,sd:8,keyBind:"ArrowLeft",color:"red",description:"Bandit 1"},{mu:10,sd:8,keyBind:"ArrowRight",color:"blue",description:"Bandit 2"}],force:[[0],[1],[1],[1]],trialDescription:"Instruction Trial 1 of 4",addedMetaData:{gameLength:10,forcedBandit:[["main"],["other"],["other"],["other"]],mainBandit:"0",mu:20,sd:8,deltaMu:-10}},{gameLength:5,machineVars:[{mu:60,sd:8,keyBind:"ArrowLeft",color:"red",description:"Bandit 1"},{mu:40,sd:8,keyBind:"ArrowRight",color:"blue",description:"Bandit 2"}],force:[[0],[1],[1],[0]],trialDescription:"Instruction Trial 2 of 4",addedMetaData:{gameLength:5,forcedBandit:[["other"],["main"],["main"],["other"]],mainBandit:"1",mu:40,sd:8,deltaMu:20}},{gameLength:5,machineVars:[{mu:60,sd:8,keyBind:"ArrowLeft",color:"red",description:"Bandit 1"},{mu:45,sd:8,keyBind:"ArrowRight",color:"blue",description:"Bandit 2"}],force:[[1],[1],[0],[1]],trialDescription:"Instruction Trial 3 of 4",addedMetaData:{gameLength:5,forcedBandit:[["main"],["other"],["main"],["other"]],mainBandit:"0",mu:60,sd:8,deltaMu:-15}},{gameLength:10,machineVars:[{mu:70,sd:8,keyBind:"ArrowLeft",color:"red",description:"Bandit 1"},{mu:40,sd:8,keyBind:"ArrowRight",color:"blue",description:"Bandit 2"}],force:[[0],[1],[0],[1]],trialDescription:"Instruction Trial 4 of 4",addedMetaData:{gameLength:10,forcedBandit:[["other"],["main"],["other"],["main"]],mainBandit:"1",mu:40,sd:8,deltaMu:30}}],n.instructions=[Object(v.jsx)(H,{getWriteKey:n.getWriteKey,nextInstruction:n.nextInstruction},-1),Object(v.jsx)(N,{docVar:document.documentElement,nextInstruction:n.nextInstruction},0),Object(v.jsx)(_,{divs:[Object(v.jsx)("h1",{style:{position:"relative",top:"100px",fontSize:"200px",textAlign:"center"},children:"Horizon Task"},"Header 1")],nextInstructionKey:"n",nextInstruction:n.nextInstruction},1),Object(v.jsx)(_,{divs:[Object(v.jsx)("h1",{style:{position:"relative",top:"100px",textAlign:"center"},children:"Welcome!"},"Header 21"),Object(v.jsx)("h1",{style:{position:"relative",top:"150px",textAlign:"center"},children:"Thank you for volunteering for this experiment"},"Header 22")],nextInstructionKey:"n",previousInstructionKey:"b",nextInstruction:n.nextInstruction,previousInstruction:n.previousInstruction},2),Object(v.jsx)(_,{divs:[Object(v.jsx)("h1",{style:{position:"relative",top:"100px",textAlign:"center",margin:"100px"},children:"This is a paid experiment.\n You will be playing a gambling game and the amount we pay you will be based on your performance.\nPlease read through these instructions carefully!"},"Header 3")],nextInstructionKey:"n",previousInstructionKey:"b",nextInstruction:n.nextInstruction,previousInstruction:n.previousInstruction},3),Object(v.jsx)(_,{divs:[Object(v.jsx)("h1",{style:{position:"relative",top:"100px",textAlign:"center",margin:"100px"},children:"In this experiment - the gambling task - we would like you to choose between two one-armed bandits (i.e. slot machines) of the sort you might find in a casino."},"Header 4")],nextInstructionKey:"n",previousInstructionKey:"b",nextInstruction:n.nextInstruction,previousInstruction:n.previousInstruction},3),Object(v.jsx)(_,{divs:[Object(v.jsx)("h1",{style:{position:"relative",top:"50px",textAlign:"center",marginLeft:"50px",marginRight:"50px",height:"100px"},children:"The one-armed bandits will be represented like this:"},"Header 5"),Object(v.jsxs)("div",{className:"row",style:{justifyContent:"space-evenly",alignItems:"center"},children:[Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"red"},51),Object(v.jsx)(y,{index:0,valid:!1,values:[],gameLength:5,machineColor:"red"},5)]})}),Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"blue"},52),Object(v.jsx)(y,{index:0,valid:!1,values:[],gameLength:5,machineColor:"blue"},6)]})})]})],nextInstructionKey:"n",nextInstruction:n.nextInstruction,previousInstructionKey:"b",previousInstruction:n.previousInstruction},4),Object(v.jsx)(_,{divs:[Object(v.jsx)("h1",{style:{position:"relative",top:"50px",textAlign:"center",marginLeft:"50px",marginRight:"50px",height:"100px"},children:"Everytime you choose to play a particular bandit, it will be pulled like this..."},"Header 6"),Object(v.jsxs)("div",{className:"row",style:{justifyContent:"space-evenly",alignItems:"center"},children:[Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"red"},51),Object(v.jsx)(y,{index:0,valid:!1,values:[],gameLength:5,machineColor:"red"},52)]})}),Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"blue",delayAnimation:!0,timeDelay:1e3},53),Object(v.jsx)(y,{index:0,valid:!1,values:[],gameLength:5,machineColor:"blue"},54)]})})]})],nextInstructionKey:"n",nextInstruction:n.nextInstruction,previousInstructionKey:"b",previousInstruction:n.previousInstruction},5),Object(v.jsx)(_,{divs:[Object(v.jsx)("h1",{style:{position:"relative",top:"50px",textAlign:"center",marginLeft:"50px",marginRight:"50px",height:"100px"},children:"... and the payoff will be shown like this. For example, in this case the left bandit has been played and is paying out 77 points"},"Header 7"),Object(v.jsxs)("div",{className:"row",style:{justifyContent:"space-evenly",alignItems:"center"},children:[Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"red",delayAnimation:!0,timeDelay:1e3},61),Object(v.jsx)(y,{index:0,valid:!1,values:[77],gameLength:5,machineColor:"red",delayNumberReveal:!0,timeDelay:1e3},62)]})}),Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"blue"},63),Object(v.jsx)(y,{index:0,valid:!1,values:[],gameLength:5,machineColor:"blue"},64)]})})]})],nextInstructionKey:"n",nextInstruction:n.nextInstruction,previousInstructionKey:"b",previousInstruction:n.previousInstruction},6),Object(v.jsx)(_,{divs:[Object(v.jsx)("h1",{style:{position:"relative",top:"50px",textAlign:"center",marginLeft:"50px",marginRight:"50px",height:"100px"},children:"Your goal is to maximize the points you get throughout the task. Try your best to get to as many points as you can!"},"Header 8"),Object(v.jsxs)("div",{className:"row",style:{justifyContent:"space-evenly",alignItems:"center"},children:[Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"red"},71),Object(v.jsx)(y,{index:1,valid:!1,values:[77],gameLength:5,machineColor:"red"},72)]})}),Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"blue"},73),Object(v.jsx)(y,{index:0,valid:!1,values:[],gameLength:5,machineColor:"blue"},74)]})})]})],nextInstructionKey:"n",nextInstruction:n.nextInstruction,previousInstructionKey:"b",previousInstruction:n.previousInstruction},7),Object(v.jsx)(_,{divs:[Object(v.jsx)("h1",{style:{position:"relative",top:"50px",textAlign:"center",marginLeft:"50px",marginRight:"50px",height:"100px"},children:"During one game, each bandit tends to pay out about the same amount of reward on average, but there is variability in the reward on any given play"},"Header 9"),Object(v.jsxs)("div",{className:"row",style:{justifyContent:"space-evenly",alignItems:"center"},children:[Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"red"},81),Object(v.jsx)(y,{index:0,valid:!1,values:[],gameLength:5,machineColor:"red"},82)]})}),Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"blue"},83),Object(v.jsx)(y,{index:0,valid:!1,values:[],gameLength:5,machineColor:"blue"},84)]})})]})],nextInstructionKey:"n",nextInstruction:n.nextInstruction,previousInstructionKey:"b",previousInstruction:n.previousInstruction},8),Object(v.jsx)(_,{divs:[Object(v.jsx)("h1",{style:{position:"relative",top:"50px",textAlign:"center",marginLeft:"50px",marginRight:"50px",height:"100px"},children:"For example, the average reward for the bandit on the right might be 50 points, but on the first play we might see a reward of 52 points because of the variability..."},"Header 10"),Object(v.jsxs)("div",{className:"row",style:{justifyContent:"space-evenly",alignItems:"center"},children:[Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"red"},91),Object(v.jsx)(y,{index:0,valid:!1,values:[],gameLength:5,machineColor:"red"},92)]})}),Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"blue",delayAnimation:!0,timeDelay:500},93),Object(v.jsx)(y,{index:0,valid:!1,values:[52],gameLength:5,machineColor:"blue",delayNumberReveal:!0,timeDelay:500},94)]})})]})],nextInstructionKey:"n",nextInstruction:n.nextInstruction,previousInstructionKey:"b",previousInstruction:n.previousInstruction},9),Object(v.jsx)(_,{divs:[Object(v.jsx)("h1",{style:{position:"relative",top:"50px",textAlign:"center",marginLeft:"50px",marginRight:"50px",height:"100px"},children:"...on the second play we might get 56 points"},"Header 11"),Object(v.jsxs)("div",{className:"row",style:{justifyContent:"space-evenly",alignItems:"center"},children:[Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"red"},101),Object(v.jsx)(y,{index:0,valid:!1,values:[],gameLength:5,machineColor:"red"},102)]})}),Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"blue",delayAnimation:!0,timeDelay:500},103),Object(v.jsx)(y,{index:1,valid:!1,values:[50,56],gameLength:5,machineColor:"blue",delayNumberReveal:!0,timeDelay:500},104)]})})]})],nextInstructionKey:"n",nextInstruction:n.nextInstruction,previousInstructionKey:"b",previousInstruction:n.previousInstruction},10),Object(v.jsx)(_,{divs:[Object(v.jsx)("h1",{style:{position:"relative",top:"50px",textAlign:"center",marginLeft:"50px",marginRight:"50px",height:"100px"},children:"...if we play a third time on the right we might get 45 points this time..."},"Header 12"),Object(v.jsxs)("div",{className:"row",style:{justifyContent:"space-evenly",alignItems:"center"},children:[Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"red"},111),Object(v.jsx)(y,{index:0,valid:!1,values:[],gameLength:5,machineColor:"red"},112)]})}),Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"blue",delayAnimation:!0,timeDelay:500},113),Object(v.jsx)(y,{index:2,valid:!1,values:[50,56,45],gameLength:5,machineColor:"blue",delayNumberReveal:!0,timeDelay:500},114)]})})]})],nextInstructionKey:"n",nextInstruction:n.nextInstruction,previousInstructionKey:"b",previousInstruction:n.previousInstruction},110),Object(v.jsx)(_,{divs:[Object(v.jsx)("h1",{style:{position:"relative",top:"50px",textAlign:"center",marginLeft:"50px",marginRight:"50px",height:"100px"},children:"...and so on such that if we were able to play the slot machine on the right 6 times in a row we might see these rewards"},"Header 13"),Object(v.jsxs)("div",{className:"row",style:{justifyContent:"space-evenly",alignItems:"center"},children:[Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"red"},121),Object(v.jsx)(y,{index:0,valid:!1,values:[],gameLength:5,machineColor:"red"},122)]})}),Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"blue"},123),Object(v.jsx)(y,{index:6,valid:!1,values:[50,56,45,39,51,50],gameLength:5,machineColor:"blue"},124)]})})]})],nextInstructionKey:"n",nextInstruction:n.nextInstruction,previousInstructionKey:"b",previousInstruction:n.previousInstruction},120),Object(v.jsx)(_,{divs:[Object(v.jsx)("h1",{style:{position:"relative",top:"50px",textAlign:"center",marginLeft:"50px",marginRight:"50px",height:"100px"},children:"On any trial you can only choose to play one of the two bandits and the number of trials in each game is determined by the height of the bandits."},"Header 14")],nextInstructionKey:"n",previousInstructionKey:"b",nextInstruction:n.nextInstruction,previousInstruction:n.previousInstruction},13),Object(v.jsx)(_,{divs:[Object(v.jsx)("h1",{style:{position:"relative",top:"50px",textAlign:"center",marginLeft:"50px",marginRight:"50px",height:"100px"},children:"For example, when the bandits are 10 boxes high, there are 10 trials in that game..."},"Header 15"),Object(v.jsxs)("div",{className:"row",style:{justifyContent:"space-evenly",alignItems:"center"},children:[Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"75px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"red"},121),Object(v.jsx)(y,{index:0,valid:!1,values:[],gameLength:10,machineColor:"red"},122)]})}),Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"75px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"blue"},123),Object(v.jsx)(y,{index:0,valid:!1,values:[],gameLength:10,machineColor:"blue"},124)]})})]})],nextInstructionKey:"n",nextInstruction:n.nextInstruction,previousInstructionKey:"b",previousInstruction:n.previousInstruction},120),Object(v.jsx)(_,{divs:[Object(v.jsx)("h1",{style:{position:"relative",top:"50px",textAlign:"center",marginLeft:"50px",marginRight:"50px",height:"100px"},children:"...when the bandits are 5 boxes high, there are only 5 trials in the game."},"Header 16"),Object(v.jsxs)("div",{className:"row",style:{justifyContent:"space-evenly",alignItems:"center"},children:[Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"red"},131),Object(v.jsx)(y,{index:0,valid:!1,values:[],gameLength:5,machineColor:"red"},132)]})}),Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"blue"},133),Object(v.jsx)(y,{index:0,valid:!1,values:[],gameLength:5,machineColor:"blue"},134)]})})]})],nextInstructionKey:"n",nextInstruction:n.nextInstruction,previousInstructionKey:"b",previousInstruction:n.previousInstruction},130),Object(v.jsx)(_,{divs:[Object(v.jsx)("h1",{style:{position:"relative",top:"50px",textAlign:"center",marginLeft:"50px",marginRight:"50px",height:"100px"},children:"The first four trials in each game are instructed trials. These instructed trials will be indicated by a green square inside the box we want you to open"},"Header 17"),Object(v.jsxs)("div",{className:"row",style:{justifyContent:"space-evenly",alignItems:"center"},children:[Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"red"},141),Object(v.jsx)(y,{index:0,valid:!0,values:[],gameLength:5,machineColor:"red"},142)]})}),Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"blue"},143),Object(v.jsx)(y,{index:0,valid:!1,values:[],gameLength:5,machineColor:"blue"},144)]})})]})],nextInstructionKey:"n",nextInstruction:n.nextInstruction,previousInstructionKey:"b",previousInstruction:n.previousInstruction},140),Object(v.jsx)(_,{divs:[Object(v.jsx)("h1",{style:{position:"relative",top:"50px",textAlign:"center",marginLeft:"50px",marginRight:"50px",height:"100px"},children:"You must press the corresponding ARROW KEY to choose this option in order to move on to see the reward and advance to the next trial"},"Header 18")],nextInstructionKey:"n",previousInstructionKey:"b",nextInstruction:n.nextInstruction,previousInstruction:n.previousInstruction},13),Object(v.jsx)(_,{divs:[Object(v.jsx)("h1",{style:{position:"relative",top:"50px",textAlign:"center",marginLeft:"50px",marginRight:"50px",height:"100px"},children:"For example, if you are instructed to choose the left bandit on the first trial, you will see this below. You must use the LEFT ARROW key to choose this option."},"Header 19"),Object(v.jsxs)("div",{className:"row",style:{justifyContent:"space-evenly",alignItems:"center"},children:[Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"red"},151),Object(v.jsx)(y,{index:0,valid:!0,values:[],gameLength:5,machineColor:"red"},152)]})}),Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"blue"},153),Object(v.jsx)(y,{index:0,valid:!1,values:[],gameLength:5,machineColor:"blue"},154)]})})]})],nextInstructionKey:"n",nextInstruction:n.nextInstruction,previousInstructionKey:"b",previousInstruction:n.previousInstruction},150),Object(v.jsx)(_,{divs:[Object(v.jsx)("h1",{style:{position:"relative",top:"50px",textAlign:"center",marginLeft:"50px",marginRight:"50px",height:"100px"},children:"If you are instructed to choose the right bandit on the second trial, you will see this:"},"Header 20"),Object(v.jsxs)("div",{className:"row",style:{justifyContent:"space-evenly",alignItems:"center"},children:[Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"red"},161),Object(v.jsx)(y,{index:1,valid:!1,values:[77],gameLength:5,machineColor:"red"},162)]})}),Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"blue"},163),Object(v.jsx)(y,{index:1,valid:!0,values:["xxx"],gameLength:5,machineColor:"blue"},164)]})})]})],nextInstructionKey:"n",nextInstruction:n.nextInstruction,previousInstructionKey:"b",previousInstruction:n.previousInstruction},160),Object(v.jsx)(_,{divs:[Object(v.jsx)("h1",{style:{position:"relative",top:"50px",textAlign:"center",marginLeft:"50px",marginRight:"50px",height:"100px"},children:"Note that you do not earn any points for the four instructed trials, but you do learn something about how rewarding each bandit is"},"Header 21"),Object(v.jsxs)("div",{className:"row",style:{justifyContent:"space-evenly",alignItems:"center"},children:[Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"red"},171),Object(v.jsx)(y,{index:4,valid:!0,values:[77,"xxx",65,67],gameLength:5,machineColor:"red"},172)]})}),Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"blue"},173),Object(v.jsx)(y,{index:4,valid:!0,values:["xxx",52,"xxx","xxx"],gameLength:5,machineColor:"blue"},174)]})})]})],nextInstructionKey:"n",nextInstruction:n.nextInstruction,previousInstructionKey:"b",previousInstruction:n.previousInstruction},170),Object(v.jsx)(_,{divs:[Object(v.jsx)("h1",{style:{position:"relative",top:"50px",textAlign:"center",marginLeft:"50px",marginRight:"50px",height:"100px"},children:"Once the instructed trials are complete, you will make free choices between the two bandits for the rest of the game (in this case 2 trials).\n The free choices are indicated by two green squares inside the bandits you are choosing between."},"Header 22"),Object(v.jsxs)("div",{className:"row",style:{justifyContent:"space-evenly",alignItems:"center"},children:[Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"red"},181),Object(v.jsx)(y,{index:4,valid:!0,values:[77,"xxx",65,67],gameLength:5,machineColor:"red"},182)]})}),Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"blue"},183),Object(v.jsx)(y,{index:4,valid:!0,values:["xxx",52,"xxx","xxx"],gameLength:5,machineColor:"blue"},184)]})})]})],nextInstructionKey:"n",nextInstruction:n.nextInstruction,previousInstructionKey:"b",previousInstruction:n.previousInstruction},180),Object(v.jsx)(_,{divs:[Object(v.jsx)("h1",{style:{position:"relative",top:"50px",textAlign:"center",marginLeft:"50px",marginRight:"50px",height:"100px"},children:"Your goal on the task's free choice trials is to earn the most points you can. The more you choose the bandit with the higher average reward, the more money you will earn in the task."},"Header 23"),Object(v.jsxs)("div",{className:"row",style:{justifyContent:"space-evenly",alignItems:"center"},children:[Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"red"},191),Object(v.jsx)(y,{index:4,valid:!0,values:[77,"xxx",65,67],gameLength:5,machineColor:"red"},192)]})}),Object(v.jsx)("div",{className:"column",children:Object(v.jsxs)("div",{className:"row",style:{position:"relative",top:"100px"},children:[Object(v.jsx)(f,{animate:!1,backgroundColor:"blue"},193),Object(v.jsx)(y,{index:4,valid:!0,values:["xxx",52,"xxx","xxx"],gameLength:5,machineColor:"blue"},194)]})})]})],nextInstructionKey:"n",nextInstruction:n.nextInstruction,previousInstructionKey:"b",previousInstruction:n.previousInstruction},190),Object(v.jsx)(_,{divs:[Object(v.jsx)("h1",{style:{position:"relative",top:"50px",textAlign:"center",marginLeft:"50px",marginRight:"50px",height:"100px"},children:"Let's try a few practice rounds to check your understanding so far."},"Header 21")],nextInstructionKey:"n",previousInstructionKey:"b",nextInstruction:n.nextInstruction,previousInstruction:n.previousInstruction},20),Object(v.jsx)(P,{trial:0,gameLength:10,machineVars:[{mu:60,sd:8,keyBind:"ArrowLeft",color:"red",description:"Bandit 1"},{mu:20,sd:8,keyBind:"ArrowRight",color:"blue",description:"Bandit 2"}],force:[[0],[1],[1],[1]],trialDescription:"Practice Horizon Trial",total_points:0,nextInstruction:n.nextInstruction},"Horizon practice trial 1"),Object(v.jsx)(_,{divs:[Object(v.jsx)("h1",{style:{position:"relative",top:"50px",textAlign:"center",marginLeft:"50px",marginRight:"50px",height:"100px"},children:"In this practice trial, you should have found that the left, red bandit gave out the higher reward on average. Lets try another practice trial."},"Header 21")],nextInstructionKey:"n",previousInstructionKey:"b",nextInstruction:n.nextInstruction,previousInstruction:n.previousInstruction,previousJump:2},21),Object(v.jsx)(P,{trial:0,gameLength:10,machineVars:[{mu:30,sd:8,keyBind:"ArrowLeft",color:"red",description:"Bandit 1"},{mu:90,sd:8,keyBind:"ArrowRight",color:"blue",description:"Bandit 2"}],force:[[1],[0],[1],[0]],trialDescription:"Practice Horizon Trial",total_points:0,nextInstruction:n.nextInstruction},"Horizon practice trial 2"),Object(v.jsx)(_,{divs:[Object(v.jsx)("h1",{style:{position:"relative",top:"50px",textAlign:"center",marginLeft:"50px",marginRight:"50px",height:"100px"},children:"In this practice trial, you should have found that the right, blue bandit gave out the higher reward on average."},"Header 21")],nextInstructionKey:"n",previousInstructionKey:"b",nextInstruction:n.nextInstruction,previousInstruction:n.previousInstruction,previousJump:2},22),Object(v.jsx)(_,{divs:[Object(v.jsx)("h1",{style:{position:"relative",top:"50px",textAlign:"center",marginLeft:"50px",marginRight:"50px",height:"100px"},children:"The points you earn in a single round will be shown in a display box in the left side of your screen, for example if you have earned 53 points you would see a box that looks like this:"},"Header 21"),Object(v.jsx)("h1",{style:{justifyContent:"center",width:"100%",textAlign:"center",position:"relative",display:"flex",top:"200px"},children:Object(v.jsx)(I,{points:"53",width:"300px",height:"75px",borderColor:"black",description:"Money This Round"})})],nextInstructionKey:"n",previousInstructionKey:"b",nextInstruction:n.nextInstruction,previousInstruction:n.previousInstruction},23),Object(v.jsx)(_,{divs:[Object(v.jsx)("h1",{style:{position:"relative",top:"50px",textAlign:"center",marginLeft:"50px",marginRight:"50px",height:"100px"},children:"The total points earned across the entire game will be shown in a display box in the right side of your screen, for example if you had a total of 3000 points you would see a box that looks like this:"},"Header 21"),Object(v.jsx)("h1",{style:{justifyContent:"center",textAlign:"center",position:"relative",width:"100%",display:"flex",top:"200px"},children:Object(v.jsx)(w,{points:"3000",totalPoints:n.terminationPoints,width:"300px",height:"75px",borderColor:"black",description:"Total Money Earned"})})],nextInstructionKey:"n",previousInstructionKey:"b",nextInstruction:n.nextInstruction,previousInstruction:n.previousInstruction},24),Object(v.jsx)(_,{divs:[Object(v.jsx)("h1",{style:{position:"relative",top:"50px",textAlign:"center",marginLeft:"50px",marginRight:"50px",height:"100px"},children:"Let's try a couple of practice trials of the complete game:"},"Header 22")],nextInstructionKey:"n",previousInstructionKey:"b",nextInstruction:n.nextInstruction,previousInstruction:n.previousInstruction},25),Object(v.jsx)("div",{children:"placeholder for instruction trial"},1),Object(v.jsx)("div",{children:"placeholder for instruction trial"},2),Object(v.jsx)("div",{children:"placeholder for instruction trial"},3),Object(v.jsx)("div",{children:"placeholder for instruction trial"},4),Object(v.jsx)(_,{divs:[Object(v.jsx)("h1",{style:{position:"relative",top:"50px",textAlign:"center",marginLeft:"50px",marginRight:"50px",height:"100px"},children:"The game will go until you have done 80 trials or you have reached 20,000$. Since you earn higher points by choosing the more profitable bandit on each trial, if you perform well you will be able to finish faster!"},"Header 21")],nextInstructionKey:"n",previousInstructionKey:"b",nextInstruction:n.nextInstruction,previousInstruction:n.previousInstruction,previousJump:5},29),Object(v.jsx)(_,{divs:[Object(v.jsx)("h1",{style:{position:"relative",top:"50px",textAlign:"center",marginLeft:"50px",marginRight:"50px",height:"100px"},children:"Good luck! To begin the task, press n. If you wish to review any of the instructions, press b."},"Header 22")],nextInstructionKey:"n",previousInstructionKey:"b",nextInstruction:n.nextInstruction,previousInstruction:n.previousInstruction},30)];var s=A();return n.game=s,n}return Object(d.a)(i,[{key:"nextInstructionTrial",value:function(t,e){console.log(t),console.log("Next Instruction Trial");var i=t.meta_data,n=t.meta_data.addedMetaData;console.log(i.deltaMu);var s={trial:i.trial,gameLength:n.gameLength,banditForce:n.forcedBandit,mainBandit:n.mainBandit,mainBanditMu:n.mu,mainBanditSd:n.sd,deltaMu:n.deltaMu,trialData:t.trial_data};this.gameData.push(s),this.csvData+=F(s),this.sendDataToExius(JSON.stringify(this.gameData),this.csvData),this.setState({instructionNumber:this.state.instructionNumber+1,instructionPoints:this.state.instructionPoints+=e})}},{key:"nextTrial",value:function(t,e){var i=t.meta_data,n=t.meta_data.addedMetaData,s={trial:i.trial,gameLength:n.gameLength,banditForce:n.forcedBandit,mainBandit:n.mainBandit,mainBanditMu:n.mu,mainBanditSd:n.sd,deltaMu:n.deltaMu,trialData:t.trial_data};this.gameData.push(s),this.csvData+=F(s),this.sendDataToExius(JSON.stringify(this.gameData),this.csvData),this.totalPoints+=e,console.log("next Trial"),this.totalPoints>this.terminationPoints?this.setState({currentTrial:this.game.length}):this.setState({currentTrial:this.state.currentTrial+1})}},{key:"getWriteKey",value:function(t){this.writeKey=t,console.log("write key passed ".concat(this.writeKey))}},{key:"sendDataToExius",value:function(){var t=Object(u.a)(l.a.mark((function t(e,i){var n,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=Date.now(),t.next=4,E([{endpoint:"HorizonJSON",fname:"Subject.json",data:e},{endpoint:"HorizonCSV",fname:"Subject.csv",data:i}],"Horizon_Task",this.writeKey);case 4:s=Date.now(),console.log(n-s),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),console.log("data send fail");case 12:case"end":return t.stop()}}),t,this,[[0,8]])})));return function(e,i){return t.apply(this,arguments)}}()},{key:"nextInstruction",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.setState({instructionNumber:this.state.instructionNumber+t})}},{key:"previousInstruction",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.setState({instructionNumber:this.state.instructionNumber-t})}},{key:"render",value:function(){if(this.state.instructionNumber<this.instructions.length){return 33<=this.state.instructionNumber&&this.state.instructionNumber<=36?Object(v.jsx)(C,Object(a.a)(Object(a.a)({trial:"instruction ".concat(this.state.instructionNumber-33)},this.instructionVars[this.state.instructionNumber-33]),{},{total_points:this.state.instructionPoints,nextTrial:this.nextInstructionTrial,terminationPoints:this.terminationPoints}),"instructionTrial ".concat(this.state.instructionNumber-33)):this.instructions[this.state.instructionNumber]}return this.state.currentTrial<this.game.length?Object(v.jsx)(C,Object(a.a)(Object(a.a)({trial:this.state.currentTrial},this.game[this.state.currentTrial]),{},{total_points:this.totalPoints,nextTrial:this.nextTrial,terminationPoints:this.terminationPoints}),"Horizon trial "+String(this.state.currentTrial)):Object(v.jsx)(S,{money:this.totalPoints,bonus:"2$",data:this.gameData})}}]),i}(j.a.Component);s.a.render(Object(v.jsx)(W,{}),document.getElementById("root"))},9:function(t,e,i){}},[[22,1,2]]]);
//# sourceMappingURL=main.e688d25e.chunk.js.map